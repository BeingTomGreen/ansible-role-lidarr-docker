#jinja2: trim_blocks: True, lstrip_blocks: True

---

services:
  {{ lidarr_docker_service_name }}:
{% if lidarr_docker_cpu_count %}
    cpu_count: {{ lidarr_docker_cpu_count }}
{% endif %}
{% if lidarr_docker_cpu_percentage %}
    cpu_percent: {{ lidarr_docker_cpu_percentage }}
{% endif %}
{% if lidarr_docker_cpu_shares %}
    cpu_shares: {{ lidarr_docker_cpu_shares }}
{% endif %}
{% if lidarr_docker_cpu_period %}
    cpu_period: {{ lidarr_docker_cpu_period }}
{% endif %}
{% if lidarr_docker_cpu_quota %}
    cpu_quota: {{ lidarr_docker_cpu_quota }}
{% endif %}
{% if lidarr_docker_cpu_rt_runtime %}
    cpu_rt_runtime: {{ lidarr_docker_cpu_rt_runtime }}
{% endif %}
{% if lidarr_docker_cpu_rt_period %}
    cpu_rt_period: {{ lidarr_docker_cpu_rt_period }}
{% endif %}
{% if lidarr_docker_cpus %}
    cpus: {{ lidarr_docker_cpus }}
{% endif %}
{% if lidarr_docker_cpuset %}
    cpuset: {{ lidarr_docker_cpuset }}
{% endif %}
{% if lidarr_docker_cap_add %}
    cap_add:
{{ lidarr_docker_cap_add | to_nice_yaml(indent=2) | indent(6, first=True) }}
{% endif %}
{% if lidarr_docker_cap_drop %}
    cap_drop:
{{ lidarr_docker_cap_drop | to_nice_yaml(indent=2) | indent(6, first=True) }}
{% endif %}
{% if lidarr_docker_container_name %}
    container_name: {{ lidarr_docker_container_name }}
{% endif %}
{% if lidarr_docker_devices %}
    devices:
{{ lidarr_docker_devices | to_nice_yaml(indent=2) | indent(6, first=True) }}
{% endif %}
{% if lidarr_docker_dns %}
    dns: {{ lidarr_docker_dns if lidarr_docker_dns is string else lidarr_docker_dns | to_yaml }}
{% endif %}
{% if lidarr_docker_dns_opt %}
    dns_opt: {{ lidarr_docker_dns_opt if lidarr_docker_dns_opt is string else lidarr_docker_dns_opt | to_yaml }}
{% endif %}
{% if lidarr_docker_dns_search %}
    dns_search: {{ lidarr_docker_dns_search if lidarr_docker_dns_search is string else lidarr_docker_dns_search | to_yaml }}
{% endif %}
{% if lidarr_docker_domainname %}
    domainname: {{ lidarr_docker_domainname }}
{% endif %}
    environment:
{{ lidarr_docker_environment | to_nice_yaml(indent=2) | indent(6, first=True) }}
{% if lidarr_docker_hostname %}
    hostname: {{ lidarr_docker_hostname }}
{% endif %}
    image: {{ lidarr_docker_image }}
{% if lidarr_docker_labels %}
    labels:
{{ lidarr_docker_labels | to_nice_yaml(indent=2) | indent(6, first=True) }}
{% endif %}
{% if lidarr_docker_mem_limit %}
    mem_limit: {{ lidarr_docker_mem_limit }}
{% endif %}
{% if lidarr_docker_mem_reservation %}
    mem_reservation: {{ lidarr_docker_mem_reservation }}
{% endif %}
{% if lidarr_docker_mem_swappiness %}
    mem_swappiness: {{ lidarr_docker_mem_swappiness }}
{% endif %}
{% if lidarr_docker_memswap_limit %}
    memswap_limit: {{ lidarr_docker_memswap_limit }}
{% endif %}
{% if lidarr_docker_network_mode %}
    network_mode: {{ lidarr_docker_network_mode }}
{% endif %}
{% if lidarr_docker_networks %}
    networks:
{{ lidarr_docker_networks | to_nice_yaml(indent=2) | indent(6, first=True) }}
{% endif %}
{% if lidarr_docker_ports %}
    ports:
{{ lidarr_docker_ports | to_nice_yaml(indent=2) | indent(6, first=True) }}
{% endif %}
{% if lidarr_docker_pull_policy %}
    pull_policy: {{ lidarr_docker_pull_policy }}
{% endif %}
{% if lidarr_docker_restart_policy %}
    restart: {{ lidarr_docker_restart_policy }}
{% endif %}
{% if lidarr_docker_runtime %}
    runtime: {{ lidarr_docker_runtime }}
{% endif %}
{% if lidarr_docker_volumes %}
    volumes:
{{ lidarr_docker_volumes | to_nice_yaml(indent=2) | indent(6, first=True) }}
{% endif %}

{% if lidarr_docker_networks %}
networks:
{% for network in lidarr_docker_networks %}
  {{ network }}:
    external: true
{% endfor %}
{% endif %}